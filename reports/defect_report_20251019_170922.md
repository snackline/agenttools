# ğŸ” ä»£ç ç¼ºé™·æ£€æµ‹ä¸ä¿®å¤æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-10-19 17:09:22

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### ğŸ¯ æ€»ä½“æƒ…å†µ

- **é™æ€åˆ†æï¼ˆå†…ç½®è§„åˆ™ï¼‰**: 26 ä¸ª
  - ğŸ”´ é«˜å±: 11 ä¸ª
  - ğŸŸ¡ ä¸­å±: 10 ä¸ª
  - ğŸŸ¢ ä½å±: 5 ä¸ª
- **å¤–éƒ¨å·¥å…·æ£€æµ‹**: 19 ä¸ª
- **åŠ¨æ€æ£€æµ‹ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰**: 0 ä¸ª
- **æ€»è®¡é—®é¢˜**: 45 ä¸ª

- **æˆåŠŸä¿®å¤**: 0 ä¸ªé—®é¢˜
- **ä¿®å¤æ–‡ä»¶æ•°**: 5 ä¸ª

- **éªŒè¯é€šè¿‡**: 0 ä¸ªæ–‡ä»¶
- **éªŒè¯å¤±è´¥**: 0 ä¸ªæ–‡ä»¶

## ğŸ”§ å¤–éƒ¨å·¥å…·æ‰§è¡Œæƒ…å†µ

| å·¥å…· | æ£€æµ‹æ•°é‡ | çŠ¶æ€ |
|------|---------|------|
| ruff | 10 | âœ… æ­£å¸¸ |
| pylint | 7 | âœ… æ­£å¸¸ |
| mypy | 2 | âœ… æ­£å¸¸ |
| bandit | 0 | âœ… æ­£å¸¸ |

## ğŸ› ç¼ºé™·è¯¦æƒ…ä¸ä¿®å¤æ–¹æ¡ˆ

### ğŸ”´ HIGH çº§åˆ« (11 ä¸ª)

#### ğŸ“„ `app.py`

**1. [PL-unexpected-keyword-arg] ç¬¬ 38 è¡Œ**
- **é—®é¢˜**: Unexpected keyword argument 'filter_tag' in method call
- **åŸä»£ç **:
  ```python
  tasks = service.list_tasks(filter_tag=args.tag)
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  tasks = service.list_tasks(filter_by_tag=args.tag)
  ```

**2. [PL-assignment-from-no-return] ç¬¬ 40 è¡Œ**
- **é—®é¢˜**: Assigning result of a function call, where the function has no return
- **åŸä»£ç **:
  ```python
  list = pretty_print(tasks)
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # ç§»é™¤èµ‹å€¼è¯­å¥ï¼Œç›´æ¥è°ƒç”¨å‡½æ•°
  ```

**3. [PL-unexpected-keyword-arg] ç¬¬ 53 è¡Œ**
- **é—®é¢˜**: Unexpected keyword argument 'id' in method call
- **åŸä»£ç **:
  ```python
  ok = service.delete_task(id=args.id)
  ```

**4. [PL-no-value-for-parameter] ç¬¬ 53 è¡Œ**
- **é—®é¢˜**: No value for argument 'task_id' in method call
- **åŸä»£ç **:
  ```python
  ok = service.delete_task(id=args.id)
  ```

#### ğŸ“„ `models.py`

**1. [AST001] ç¬¬ 10 è¡Œ**
- **é—®é¢˜**: dataclass å­—æ®µ tags çš„é»˜è®¤å€¼ä¸ºå¯å˜å¯¹è±¡ï¼Œæ‰€æœ‰å®ä¾‹å°†å…±äº«ã€‚
- **åŸä»£ç **:
  ```python
  tags: List[str] = []  # BUG: å¯å˜é»˜è®¤å€¼ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€åˆ—è¡¨
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  tags: List[str] = field(default_factory=list)  # ä½¿ç”¨ field(default_factory=list)
  ```

**2. [PY100] ç¬¬ 22 è¡Œ**
- **é—®é¢˜**: ä½¿ç”¨äº†æœªå®šä¹‰çš„åç§° 'staticmethod'ã€‚
- **åŸä»£ç **:
  ```python
  @staticmethod
  ```

#### ğŸ“„ `services.py`

**1. [MYPY] ç¬¬ 42 è¡Œ**
- **é—®é¢˜**: Argument 1 to "remove" of "list" has incompatible type "int"; expected "Task"  [arg-type]
- **åŸä»£ç **:
  ```python
  tasks.remove(task_id)
  ```

#### ğŸ“„ `storage.py`

**1. [MYPY] ç¬¬ 14 è¡Œ**
- **é—®é¢˜**: Incompatible return value type (got "None", expected "list[Task]")  [return-value]
- **åŸä»£ç **:
  ```python
  return None
  ```

#### ğŸ“„ `utils.py`

**1. [PY100] ç¬¬ 9 è¡Œ**
- **é—®é¢˜**: ä½¿ç”¨äº†æœªå®šä¹‰çš„åç§° 'colour'ã€‚
- **åŸä»£ç **:
  ```python
  status = "âœ“" if t.done else colour("x", "red")
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # å®šä¹‰ colour å‡½æ•°æˆ–å¯¼å…¥: from termcolor import colored as colour
  ```

**2. [RUFF-F821] ç¬¬ 9 è¡Œ**
- **é—®é¢˜**: Undefined name `colour`
- **åŸä»£ç **:
  ```python
  status = "âœ“" if t.done else colour("x", "red")
  ```

**3. [PL-undefined-variable] ç¬¬ 9 è¡Œ**
- **é—®é¢˜**: Undefined variable 'colour'
- **åŸä»£ç **:
  ```python
  status = "âœ“" if t.done else colour("x", "red")
  ```

### ğŸŸ¡ MEDIUM çº§åˆ« (10 ä¸ª)

#### ğŸ“„ `app.py`

**1. [RUFF-W292] ç¬¬ 66 è¡Œ**
- **é—®é¢˜**: No newline at end of file
- **åŸä»£ç **:
  ```python
  main()
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œ
  ```

**2. [PL-redefined-builtin] ç¬¬ 40 è¡Œ**
- **é—®é¢˜**: Redefining built-in 'list'
- **åŸä»£ç **:
  ```python
  list = pretty_print(tasks)
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  task_list = pretty_print(tasks)
  ```

#### ğŸ“„ `models.py`

**1. [AST003] ç¬¬ 11 è¡Œ**
- **é—®é¢˜**: dataclass å­—æ®µ created_at çš„é»˜è®¤å€¼ä¸ºå‡½æ•°è°ƒç”¨ï¼Œè¯¥å€¼åœ¨ç±»å®šä¹‰æ—¶å›ºå®šã€‚
- **åŸä»£ç **:
  ```python
  created_at: datetime = datetime.now()  # BUG: å¯¼å…¥æ—¶å›ºå®šæ—¶é—´ï¼Œæ‰€æœ‰å®ä¾‹ç›¸åŒ
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  created_at: datetime = None  # åœ¨ __post_init__ ä¸­è®¾ç½®  # BUG: å¯¼å…¥æ—¶å›ºå®šæ—¶é—´ï¼Œæ‰€æœ‰å®ä¾‹ç›¸åŒ
  ```

**2. [RUFF-W292] ç¬¬ 35 è¡Œ**
- **é—®é¢˜**: No newline at end of file
- **åŸä»£ç **:
  ```python
  return t
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œ
  ```

#### ğŸ“„ `services.py`

**1. [AST002] ç¬¬ 30 è¡Œ**
- **é—®é¢˜**: ç–‘ä¼¼ä½¿ç”¨ 'is' è¿›è¡Œå€¼æ¯”è¾ƒï¼Œå»ºè®®ä½¿ç”¨ '==' ï¼ˆis ä»…ç”¨äº None/True/Falseï¼‰ã€‚
- **åŸä»£ç **:
  ```python
  if t.id is task_id:
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  if t.id == task_id:
  ```

**2. [PY202] ç¬¬ 19 è¡Œ**
- **é—®é¢˜**: åœ¨ç”Ÿæˆå™¨ä¸Šä½¿ç”¨ max()ï¼Œè‹¥åºåˆ—ä¸ºç©ºä¼šæŠ›å‡º ValueErrorï¼Œå»ºè®®åŠ é»˜è®¤å€¼ã€‚
- **åŸä»£ç **:
  ```python
  next_id = max(t.id for t in tasks) + 1
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  next_id = max(t.id for t in tasks, default=0) + 1
  ```

**3. [RUFF-W292] ç¬¬ 51 è¡Œ**
- **é—®é¢˜**: No newline at end of file
- **åŸä»£ç **:
  ```python
  return [t for t in tasks if keyword in t.title]
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œ
  ```

#### ğŸ“„ `storage.py`

**1. [RUFF-W292] ç¬¬ 28 è¡Œ**
- **é—®é¢˜**: No newline at end of file
- **åŸä»£ç **:
  ```python
  json.dump(tasks, f, ensure_ascii=False, indent=2)
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œ
  ```

**2. [PL-unspecified-encoding] ç¬¬ 13 è¡Œ**
- **é—®é¢˜**: Using open without explicitly specifying an encoding
- **åŸä»£ç **:
  ```python
  open(self.path, "w").close()
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  open(self.path, "w", encoding="utf-8").close(, encoding="utf-8")
  ```

#### ğŸ“„ `utils.py`

**1. [RUFF-W292] ç¬¬ 11 è¡Œ**
- **é—®é¢˜**: No newline at end of file
- **åŸä»£ç **:
  ```python
  print(f"{t.id:<3} {t.title:<22} {tag_str:<20} {status} {t.created_at:%Y-%m-%d}")
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºè¡Œ
  ```

### ğŸŸ¢ LOW çº§åˆ« (5 ä¸ª)

#### ğŸ“„ `app.py`

**1. [RUFF-I001] ç¬¬ 1 è¡Œ**
- **é—®é¢˜**: Import block is un-sorted or un-formatted
- **åŸä»£ç **:
  ```python
  import argparse
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # ä½¿ç”¨ 'ruff check --fixers' æˆ– 'isort' è‡ªåŠ¨æ’åºå¯¼å…¥
  ```

#### ğŸ“„ `models.py`

**1. [RUFF-I001] ç¬¬ 1 è¡Œ**
- **é—®é¢˜**: Import block is un-sorted or un-formatted
- **åŸä»£ç **:
  ```python
  from dataclasses import dataclass
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # ä½¿ç”¨ 'ruff check --fixers' æˆ– 'isort' è‡ªåŠ¨æ’åºå¯¼å…¥
  ```

#### ğŸ“„ `services.py`

**1. [PY203] ç¬¬ 42 è¡Œ**
- **é—®é¢˜**: list.remove() è¦æ±‚å‚æ•°ä¸ºåˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œè€Œéç´¢å¼•ã€‚
- **åŸä»£ç **:
  ```python
  tasks.remove(task_id)
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  tasks.remove(task)  # ä¼ å…¥å¯¹è±¡è€Œé ID
  ```

**2. [RUFF-I001] ç¬¬ 1 è¡Œ**
- **é—®é¢˜**: Import block is un-sorted or un-formatted
- **åŸä»£ç **:
  ```python
  from typing import List, Optional
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # ä½¿ç”¨ 'ruff check --fixers' æˆ– 'isort' è‡ªåŠ¨æ’åºå¯¼å…¥
  ```

#### ğŸ“„ `storage.py`

**1. [RUFF-I001] ç¬¬ 1 è¡Œ**
- **é—®é¢˜**: Import block is un-sorted or un-formatted
- **åŸä»£ç **:
  ```python
  import json
  ```
- **ä¿®å¤æ–¹æ¡ˆ**:
  ```python
  # ä½¿ç”¨ 'ruff check --fixers' æˆ– 'isort' è‡ªåŠ¨æ’åºå¯¼å…¥
  ```
