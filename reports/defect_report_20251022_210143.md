# 🔍 代码缺陷检测与修复报告

**生成时间**: 2025-10-22 21:01:43

---

## 📊 执行摘要

### 🎯 总体情况

- **静态分析（内置规则）**: 288 个
  - 🔴 高危: 113 个
  - 🟡 中危: 131 个
  - 🟢 低危: 44 个
- **外部工具检测**: 223 个
- **动态检测（编译错误）**: 0 个
- **总计问题**: 511 个

- **成功修复**: 0 个问题
- **修复文件数**: 16 个

- **验证通过**: 0 个文件
- **验证失败**: 0 个文件

## 🔧 外部工具执行情况

| 工具 | 检测数量 | 状态 |
|------|---------|------|
| ruff | 0 | ✅ 正常 |
| pylint | 212 | ✅ 正常 |
| mypy | 1 | ✅ 正常 |
| bandit | 10 | ✅ 正常 |

## 🐛 缺陷详情与修复方案

### 🔴 HIGH 级别 (113 个)

#### 📄 `audio_manager.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

#### 📄 `build.py`

**1. [PY002] 第 6 行**
- **问题**: 调用 os.system 存在命令注入风险。
- **原代码**:
  ```python
  result = os.system(cmd)
  ```

**2. [PY002] 第 22 行**
- **问题**: 调用 os.system 存在命令注入风险。
- **原代码**:
  ```python
  os.system("rmdir /s /q dist build *.spec >nul 2>&1")
  ```

**3. [B605] 第 6 行**
- **问题**: Starting a process with a shell, possible injection detected, security issue.
- **原代码**:
  ```python
  result = os.system(cmd)
  ```

#### 📄 `font_loader.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-no-name-in-module] 第 4 行**
- **问题**: No name 'FONT_PATHS' in module 'config'
- **原代码**:
  ```python
  from config import FONT_PATHS, FONT_SIZES
  ```

**3. [PL-no-name-in-module] 第 4 行**
- **问题**: No name 'FONT_SIZES' in module 'config'
- **原代码**:
  ```python
  from config import FONT_PATHS, FONT_SIZES
  ```

#### 📄 `game_controller.py`

**1. [PY100] 第 183 行**
- **问题**: 使用了未定义的名称 'p'。
- **原代码**:
  ```python
  if all(p.solved for p in self.state['puzzle_pieces']):
  ```

**2. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**3. [PL-no-name-in-module] 第 6 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT, PIECE_AREA_HEIGHT
  ```

**4. [PL-no-name-in-module] 第 6 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT, PIECE_AREA_HEIGHT
  ```

**5. [PL-no-name-in-module] 第 6 行**
- **问题**: No name 'PIECE_AREA_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT, PIECE_AREA_HEIGHT
  ```

**6. [PL-import-error] 第 7 行**
- **问题**: Unable to import 'game.puzzle_generator'
- **原代码**:
  ```python
  from game.puzzle_generator import split_image
  ```

**7. [PL-import-error] 第 8 行**
- **问题**: Unable to import 'data.image_manager'
- **原代码**:
  ```python
  from data.image_manager import ImageManager
  ```

**8. [PL-import-error] 第 9 行**
- **问题**: Unable to import 'data.save_manager'
- **原代码**:
  ```python
  from data.save_manager import save_game_state, load_game_state
  ```

**9. [PL-import-error] 第 10 行**
- **问题**: Unable to import 'data.ranking_manager'
- **原代码**:
  ```python
  from data.ranking_manager import RankingManager
  ```

**10. [PL-import-error] 第 11 行**
- **问题**: Unable to import 'ui.game_ui'
- **原代码**:
  ```python
  from ui.game_ui import GameUI
  ```

**11. [PL-import-error] 第 43 行**
- **问题**: Unable to import 'game.generate_jigsaw_mask'
- **原代码**:
  ```python
  from game.generate_jigsaw_mask import create_jigsaw_mask  # 导入但未使用
  ```

**12. [PL-import-error] 第 152 行**
- **问题**: Unable to import 'game.puzzle_piece'
- **原代码**:
  ```python
  from game.puzzle_piece import PuzzlePiece
  ```

#### 📄 `game_logic.py`

**1. [PY006] 第 132 行**
- **问题**: 使用 pickle 反序列化存在安全风险。
- **原代码**:
  ```python
  state = pickle.load(f)
  ```

**2. [PY100] 第 250 行**
- **问题**: 使用了未定义的名称 'run_puzzle_game'。
- **原代码**:
  ```python
  result = run_puzzle_game(
  ```

**3. [PY100] 第 268 行**
- **问题**: 使用了未定义的名称 'run_puzzle_game'。
- **原代码**:
  ```python
  result = run_puzzle_game(self.screen, puzzle_order, puzzle_order, puzzle_shape,
  ```

**4. [PY100] 第 287 行**
- **问题**: 使用了未定义的名称 'run_puzzle_game'。
- **原代码**:
  ```python
  result = run_puzzle_game(
  ```

**5. [PL-import-error] 第 4 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**6. [PL-import-error] 第 11 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image
  ```

**7. [PL-import-error] 第 14 行**
- **问题**: Unable to import 'utils.normalizer'
- **原代码**:
  ```python
  from utils.normalizer import normalize_shape as norm_shape_for_rank, infer_image_id
  ```

**8. [PL-import-error] 第 18 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**9. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**10. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**11. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'PIECE_AREA_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**12. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'BACKGROUND_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**13. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'GRID_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**14. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'TEXT_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**15. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'PIECE_BG_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**16. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'SAVE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**17. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'RANKING_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**18. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'CUSTOM_IMAGE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**19. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'FONT_PATHS' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**20. [PL-no-name-in-module] 第 26 行**
- **问题**: No name 'FONT_SIZES' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**21. [PL-import-error] 第 48 行**
- **问题**: Unable to import 'game.puzzle_piece'
- **原代码**:
  ```python
  from game.puzzle_piece import PuzzlePiece
  ```

**22. [PL-import-error] 第 49 行**
- **问题**: Unable to import 'ui.start_screen_ui'
- **原代码**:
  ```python
  from ui.start_screen_ui import Button, show_save_slot_selection, show_start_screen # 导入UI组件
  ```

**23. [PL-import-error] 第 50 行**
- **问题**: Unable to import 'data.ranking_manager'
- **原代码**:
  ```python
  from data.ranking_manager import RankingManager
  ```

**24. [PL-no-name-in-module] 第 79 行**
- **问题**: No name 'FONT_SIZES' in module 'config'
- **原代码**:
  ```python
  from config import FONT_SIZES
  ```

**25. [PL-import-error] 第 80 行**
- **问题**: Unable to import 'game.game_logic'
- **原代码**:
  ```python
  from game.game_logic import load_font
  ```

**26. [PL-import-error] 第 427 行**
- **问题**: Unable to import 'game.generate_jigsaw_mask'
- **原代码**:
  ```python
  from game.generate_jigsaw_mask import split_image_with_jigsaw_mask
  ```

**27. [PL-import-error] 第 432 行**
- **问题**: Unable to import 'game.generate_triangle_mask'
- **原代码**:
  ```python
  from game.generate_triangle_mask import split_image_with_triangle_mask
  ```

**28. [PL-import-error] 第 440 行**
- **问题**: Unable to import 'game.generate_rectangle_mask'
- **原代码**:
  ```python
  from game.generate_rectangle_mask import split_image_with_rectangle_mask
  ```

#### 📄 `game_ui.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**3. [PL-no-name-in-module] 第 4 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**4. [PL-no-name-in-module] 第 4 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**5. [PL-no-member] 第 191 行**
- **问题**: Instance of 'GameUI' has no 'font_large' member
- **原代码**:
  ```python
  congrats = self.font_large.render("🎉 恭喜完成！", True, (0, 0, 0))
  ```

**6. [PL-no-member] 第 192 行**
- **问题**: Instance of 'GameUI' has no 'font_medium' member
- **原代码**:
  ```python
  time_text = self.font_medium.render(f"用时: {total_time} 秒", True, (0, 0, 0))
  ```

#### 📄 `generate_jigsaw_mask.py`

**1. [PL-import-error] 第 6 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image, ImageDraw, ImageOps
  ```

**2. [PL-import-error] 第 8 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame # 新增导入
  ```

#### 📄 `generate_rectangle_mask.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image
  ```

#### 📄 `generate_triangle_mask.py`

**1. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 4 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image, ImageDraw, ImageFont
  ```

#### 📄 `image_editor.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 4 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image, ImageTk
  ```

**3. [PL-import-error] 第 5 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**4. [PL-import-error] 第 6 行**
- **问题**: Unable to import 'data.image_manager'
- **原代码**:
  ```python
  from data.image_manager import ImageManager
  ```

**5. [PL-no-name-in-module] 第 8 行**
- **问题**: No name 'CUSTOM_IMAGE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import CUSTOM_IMAGE_DIR
  ```

#### 📄 `image_manager.py`

**1. [PL-no-name-in-module] 第 3 行**
- **问题**: No name 'CUSTOM_IMAGE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import CUSTOM_IMAGE_DIR
  ```

#### 📄 `main.py`

**1. [PY100] 第 72 行**
- **问题**: 使用了未定义的名称 'current_time'。
- **原代码**:
  ```python
  print(f"【提示】系统设置暂未实现, 当前时间: {current_time}")  # current_time 未定义
  ```

**2. [PL-import-error] 第 12 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**3. [PL-no-name-in-module] 第 21 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**4. [PL-no-name-in-module] 第 21 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**5. [PL-import-error] 第 24 行**
- **问题**: Unable to import 'ui.main_menu_ui'
- **原代码**:
  ```python
  from ui.main_menu_ui import show_main_menu
  ```

**6. [PL-import-error] 第 27 行**
- **问题**: Unable to import 'game.game_logic'
- **原代码**:
  ```python
  from game.game_logic import GameController
  ```

**7. [PL-undefined-variable] 第 72 行**
- **问题**: Undefined variable 'current_time'
- **原代码**:
  ```python
  print(f"【提示】系统设置暂未实现, 当前时间: {current_time}")  # current_time 未定义
  ```

#### 📄 `main_menu_ui.py`

**1. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 4 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**3. [PL-no-name-in-module] 第 5 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**4. [PL-no-name-in-module] 第 5 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

#### 📄 `puzzle_editor.py`

**1. [PL-import-error] 第 9 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image, ImageOps
  ```

#### 📄 `puzzle_editor_ui.py`

**1. [PL-import-error] 第 6 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 8 行**
- **问题**: Unable to import 'PIL'
- **原代码**:
  ```python
  from PIL import Image
  ```

**3. [PL-import-error] 第 9 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**4. [PL-import-error] 第 11 行**
- **问题**: Unable to import 'game.generate_jigsaw_mask'
- **原代码**:
  ```python
  from game.generate_jigsaw_mask import draw_jigsaw_outline_on_image
  ```

#### 📄 `puzzle_generator.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

#### 📄 `puzzle_piece.py`

**1. [PL-import-error] 第 2 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

#### 📄 `puzzle_rotation.py`

**1. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

#### 📄 `ranking_manager.py`

**1. [PY100] 第 29 行**
- **问题**: 使用了未定义的名称 'round'。
- **原代码**:
  ```python
  return int(round(float(v)))
  ```

**2. [PY100] 第 147 行**
- **问题**: 使用了未定义的名称 'x'。
- **原代码**:
  ```python
  rows.sort(key=lambda x: x.get("elapsed", 1_000_000))
  ```

**3. [PL-no-name-in-module] 第 4 行**
- **问题**: No name 'RANKING_DIR' in module 'config'
- **原代码**:
  ```python
  from config import RANKING_DIR
  ```

#### 📄 `ranking_ui.py`

**1. [PL-import-error] 第 4 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-import-error] 第 5 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**3. [PL-import-error] 第 6 行**
- **问题**: Unable to import 'data.ranking_manager'
- **原代码**:
  ```python
  from data.ranking_manager import RankingManager
  ```

**4. [PL-import-error] 第 7 行**
- **问题**: Unable to import 'data.image_manager'
- **原代码**:
  ```python
  from data.image_manager import ImageManager
  ```

**5. [PL-no-name-in-module] 第 8 行**
- **问题**: No name 'RANKING_DIR' in module 'config'
- **原代码**:
  ```python
  from config import RANKING_DIR, SCREEN_WIDTH, SCREEN_HEIGHT, CUSTOM_IMAGE_DIR
  ```

**6. [PL-no-name-in-module] 第 8 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import RANKING_DIR, SCREEN_WIDTH, SCREEN_HEIGHT, CUSTOM_IMAGE_DIR
  ```

**7. [PL-no-name-in-module] 第 8 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import RANKING_DIR, SCREEN_WIDTH, SCREEN_HEIGHT, CUSTOM_IMAGE_DIR
  ```

**8. [PL-no-name-in-module] 第 8 行**
- **问题**: No name 'CUSTOM_IMAGE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import RANKING_DIR, SCREEN_WIDTH, SCREEN_HEIGHT, CUSTOM_IMAGE_DIR
  ```

#### 📄 `settings_ui.py`

**1. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**2. [PL-no-name-in-module] 第 5 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_HEIGHT,SCREEN_WIDTH
  ```

**3. [PL-no-name-in-module] 第 5 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import SCREEN_HEIGHT,SCREEN_WIDTH
  ```

**4. [PL-import-error] 第 6 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font  # ✅ 导入字体加载器
  ```

#### 📄 `start_screen_ui.py`

**1. [PY006] 第 146 行**
- **问题**: 使用 pickle 反序列化存在安全风险。
- **原代码**:
  ```python
  state = pickle.load(f)
  ```

**2. [PL-import-error] 第 3 行**
- **问题**: Unable to import 'pygame'
- **原代码**:
  ```python
  import pygame
  ```

**3. [PL-import-error] 第 8 行**
- **问题**: Unable to import 'utils.font_loader'
- **原代码**:
  ```python
  from utils.font_loader import load_font
  ```

**4. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'SCREEN_WIDTH' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**5. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'SCREEN_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**6. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'PIECE_AREA_HEIGHT' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**7. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'BACKGROUND_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**8. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'GRID_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**9. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'TEXT_COLOR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**10. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'SAVE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**11. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'RANKING_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**12. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'CUSTOM_IMAGE_DIR' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**13. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'FONT_PATHS' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

**14. [PL-no-name-in-module] 第 16 行**
- **问题**: No name 'FONT_SIZES' in module 'config'
- **原代码**:
  ```python
  from config import (
  ```

### 🟡 MEDIUM 级别 (131 个)

#### 📄 `audio_manager.py`

**1. [PL-broad-exception-caught] 第 19 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PL-broad-exception-caught] 第 43 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `build.py`

**1. [PL-redefined-outer-name] 第 5 行**
- **问题**: Redefining name 'cmd' from outer scope (line 25)
- **原代码**:
  ```python
  def run(cmd):
  ```

**2. [PL-unused-import] 第 15 行**
- **问题**: Unused import PyInstaller
- **原代码**:
  ```python
  import PyInstaller
  ```

#### 📄 `font_loader.py`

**1. [PL-unused-import] 第 4 行**
- **问题**: Unused FONT_PATHS imported from config
- **原代码**:
  ```python
  from config import FONT_PATHS, FONT_SIZES
  ```

**2. [PL-unused-import] 第 4 行**
- **问题**: Unused FONT_SIZES imported from config
- **原代码**:
  ```python
  from config import FONT_PATHS, FONT_SIZES
  ```

#### 📄 `game_controller.py`

**1. [AST002] 第 45 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if image_path is None:
  ```
- **修复方案**:
  ```python
  if image_path == None:
  ```

**2. [PL-unused-import] 第 43 行**
- **问题**: Unused create_jigsaw_mask imported from game.generate_jigsaw_mask
- **原代码**:
  ```python
  from game.generate_jigsaw_mask import create_jigsaw_mask  # 导入但未使用
  ```

**3. [PL-using-constant-test] 第 117 行**
- **问题**: Using a conditional statement with a constant value
- **原代码**:
  ```python
  if False:  # 永远不会执行的代码块
  ```

**4. [PL-unused-variable] 第 129 行**
- **问题**: Unused variable 'piece_area_rect'
- **原代码**:
  ```python
  piece_area_rect = pygame.Rect(0, SCREEN_HEIGHT - PIECE_AREA_HEIGHT, SCREEN_WIDTH, PIECE_AREA_HEIGHT)
  ```

**5. [PL-unused-variable] 第 158 行**
- **问题**: Unused variable 'dt'
- **原代码**:
  ```python
  dt = self.clock.tick(60)
  ```

**6. [PL-unused-variable] 第 231 行**
- **问题**: Unused variable 'project_root'
- **原代码**:
  ```python
  project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
  ```

**7. [PL-redefined-outer-name] 第 245 行**
- **问题**: Redefining name 'os' from outer scope (line 3)
- **原代码**:
  ```python
  import os
  ```

**8. [PL-reimported] 第 245 行**
- **问题**: Reimport 'os' (imported line 3)
- **原代码**:
  ```python
  import os
  ```

#### 📄 `game_logic.py`

**1. [AST002] 第 206 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if user_id is not None:
  ```
- **修复方案**:
  ```python
  if user_id == not None:
  ```

**2. [AST002] 第 263 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if puzzle_id is None:
  ```
- **修复方案**:
  ```python
  if puzzle_id == None:
  ```

**3. [AST002] 第 267 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if image_path is not None: # 成功加载
  ```
- **修复方案**:
  ```python
  if image_path == not None: # 成功加载
  ```

**4. [AST002] 第 396 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if image_path is None:
  ```
- **修复方案**:
  ```python
  if image_path == None:
  ```

**5. [PY202] 第 747 行**
- **问题**: 在生成器上使用 max()，若序列为空会抛出 ValueError，建议加默认值。
- **原代码**:
  ```python
  max_x = max(area.rect.right for area in target_areas)
  ```
- **修复方案**:
  ```python
  max_x = max(area.rect.right for area in target_areas, default=0)
  ```

**6. [PY202] 第 748 行**
- **问题**: 在生成器上使用 max()，若序列为空会抛出 ValueError，建议加默认值。
- **原代码**:
  ```python
  max_y = max(area.rect.bottom for area in target_areas)
  ```
- **修复方案**:
  ```python
  max_y = max(area.rect.bottom for area in target_areas, default=0)
  ```

**7. [PL-bad-indentation] 第 268 行**
- **问题**: Bad indentation. Found 21 spaces, expected 20
- **原代码**:
  ```python
  result = run_puzzle_game(self.screen, puzzle_order, puzzle_order, puzzle_shape,
  ```

**8. [PL-bad-indentation] 第 270 行**
- **问题**: Bad indentation. Found 21 spaces, expected 20
- **原代码**:
  ```python
  return result
  ```

**9. [PL-redefined-outer-name] 第 79 行**
- **问题**: Redefining name 'FONT_SIZES' from outer scope (line 26)
- **原代码**:
  ```python
  from config import FONT_SIZES
  ```

**10. [PL-redefined-outer-name] 第 80 行**
- **问题**: Redefining name 'load_font' from outer scope (line 18)
- **原代码**:
  ```python
  from game.game_logic import load_font
  ```

**11. [PL-reimported] 第 79 行**
- **问题**: Reimport 'FONT_SIZES' (imported line 26)
- **原代码**:
  ```python
  from config import FONT_SIZES
  ```

**12. [PL-reimported] 第 80 行**
- **问题**: Reimport 'load_font' (imported line 18)
- **原代码**:
  ```python
  from game.game_logic import load_font
  ```

**13. [PL-broad-exception-caught] 第 121 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**14. [PL-broad-exception-caught] 第 135 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**15. [PL-unused-variable] 第 160 行**
- **问题**: Unused variable 'font_small'
- **原代码**:
  ```python
  font_small = load_font('zhengwen.ttf', 18)
  ```

**16. [PL-unused-variable] 第 242 行**
- **问题**: Unused variable 'load_saved'
- **原代码**:
  ```python
  rows, cols, load_saved, action, shape_style = show_start_screen(self.screen, IMAGE_PATH)
  ```

**17. [PL-broad-exception-caught] 第 317 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**18. [PL-redefined-outer-name] 第 332 行**
- **问题**: Redefining name 'project_root' from outer scope (line 21)
- **原代码**:
  ```python
  project_root = os.path.dirname(current_dir)      # 项目根目录
  ```

**19. [PL-broad-exception-caught] 第 352 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**20. [PL-broad-exception-caught] 第 417 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**21. [PL-broad-exception-caught] 第 462 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**22. [PL-broad-exception-caught] 第 479 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**23. [PL-broad-exception-caught] 第 665 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**24. [PL-f-string-without-interpolation] 第 701 行**
- **问题**: Using an f-string that does not have any interpolated variables
- **原代码**:
  ```python
  print(f"保存失败")
  ```

**25. [PL-broad-exception-caught] 第 800 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**26. [PL-unused-variable] 第 332 行**
- **问题**: Unused variable 'project_root'
- **原代码**:
  ```python
  project_root = os.path.dirname(current_dir)      # 项目根目录
  ```

**27. [PL-unused-variable] 第 342 行**
- **问题**: Unused variable 'assets_dir'
- **原代码**:
  ```python
  assets_dir = os.path.normpath(os.path.join(current_dir, '..', 'assets'))
  ```

**28. [PL-unused-variable] 第 539 行**
- **问题**: Unused variable 'solved_positions_from_save'
- **原代码**:
  ```python
  solved_positions_from_save = saved_state.get('solved_positions', {})
  ```

**29. [PL-unused-import] 第 14 行**
- **问题**: Unused normalize_shape imported from utils.normalizer as norm_shape_for_rank
- **原代码**:
  ```python
  from utils.normalizer import normalize_shape as norm_shape_for_rank, infer_image_id
  ```

**30. [PL-unused-import] 第 14 行**
- **问题**: Unused infer_image_id imported from utils.normalizer
- **原代码**:
  ```python
  from utils.normalizer import normalize_shape as norm_shape_for_rank, infer_image_id
  ```

**31. [PL-unused-import] 第 26 行**
- **问题**: Unused FONT_PATHS imported from config
- **原代码**:
  ```python
  from config import (
  ```

**32. [PL-unused-import] 第 26 行**
- **问题**: Unused FONT_SIZES imported from config
- **原代码**:
  ```python
  from config import (
  ```

**33. [B301] 第 132 行**
- **问题**: Pickle and modules that wrap it can be unsafe when used to deserialize untrusted data, possible security issue.
- **原代码**:
  ```python
  state = pickle.load(f)
  ```

#### 📄 `game_ui.py`

**1. [AST002] 第 85 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if callbacks is None:
  ```
- **修复方案**:
  ```python
  if callbacks == None:
  ```

**2. [PL-unused-argument] 第 37 行**
- **问题**: Unused argument 'screen'
- **原代码**:
  ```python
  def __init__(self, screen):
  ```

**3. [PL-broad-exception-caught] 第 110 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**4. [PL-unused-argument] 第 79 行**
- **问题**: Unused argument 'moves'
- **原代码**:
  ```python
  def draw_game_screen(self, screen, pieces, target_areas, original_image, time_elapsed, moves, callbacks=None):
  ```

**5. [PL-unused-argument] 第 160 行**
- **问题**: Unused argument 'screen'
- **原代码**:
  ```python
  def _position_buttons(self, screen):
  ```

**6. [PL-unreachable] 第 186 行**
- **问题**: Unreachable code
- **原代码**:
  ```python
  if events:
  ```

**7. [PL-unused-import] 第 4 行**
- **问题**: Unused SCREEN_WIDTH imported from config
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

**8. [PL-unused-import] 第 4 行**
- **问题**: Unused SCREEN_HEIGHT imported from config
- **原代码**:
  ```python
  from config import SCREEN_WIDTH, SCREEN_HEIGHT
  ```

#### 📄 `generate_jigsaw_mask.py`

**1. [PL-attribute-defined-outside-init] 第 52 行**
- **问题**: Attribute 'pieces' defined outside __init__
- **原代码**:
  ```python
  self.pieces = []
  ```

**2. [PL-attribute-defined-outside-init] 第 71 行**
- **问题**: Attribute 'pieces' defined outside __init__
- **原代码**:
  ```python
  self.pieces = []
  ```

**3. [PL-broad-exception-caught] 第 175 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**4. [PL-broad-exception-caught] 第 218 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**5. [PL-broad-exception-caught] 第 239 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**6. [PL-broad-exception-caught] 第 247 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**7. [PL-broad-exception-caught] 第 269 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**8. [PL-unused-variable] 第 317 行**
- **问题**: Unused variable 'top_type'
- **原代码**:
  ```python
  top_type = get_edge_type(row, col, rows, cols, "top")
  ```

**9. [PL-unused-variable] 第 320 行**
- **问题**: Unused variable 'right_type'
- **原代码**:
  ```python
  right_type = get_edge_type(row, col, rows, cols, "right")
  ```

#### 📄 `image_editor.py`

**1. [PL-broad-exception-caught] 第 62 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PL-unused-import] 第 4 行**
- **问题**: Unused ImageTk imported from PIL
- **原代码**:
  ```python
  from PIL import Image, ImageTk
  ```

#### 📄 `main.py`

**1. [AST002] 第 7 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if sys.stdout is None:
  ```
- **修复方案**:
  ```python
  if sys.stdout == None:
  ```

**2. [AST002] 第 9 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if sys.stderr is None:
  ```
- **修复方案**:
  ```python
  if sys.stderr == None:
  ```

**3. [PL-bad-indentation] 第 68 行**
- **问题**: Bad indentation. Found 17 spaces, expected 16
- **原代码**:
  ```python
  break
  ```

**4. [PL-fixme] 第 77 行**
- **问题**: TODO: 实现排行榜功能 - 这个TODO永远不会被完成
- **原代码**:
  ```python
  # TODO: 实现排行榜功能 - 这个TODO永远不会被完成
  ```

**5. [PL-reimported] 第 4 行**
- **问题**: Reimport 'sys' (imported line 3)
- **原代码**:
  ```python
  import sys  # 重复导入
  ```

**6. [PL-unspecified-encoding] 第 8 行**
- **问题**: Using open without explicitly specifying an encoding
- **原代码**:
  ```python
  sys.stdout = open('nul', 'w')
  ```
- **修复方案**:
  ```python
  sys.stdout = open('nul', 'w', encoding="utf-8")
  ```

**7. [PL-unspecified-encoding] 第 10 行**
- **问题**: Using open without explicitly specifying an encoding
- **原代码**:
  ```python
  sys.stderr = open('nul', 'w')
  ```
- **修复方案**:
  ```python
  sys.stderr = open('nul', 'w', encoding="utf-8")
  ```

**8. [PL-reimported] 第 13 行**
- **问题**: Reimport 'sys' (imported line 3)
- **原代码**:
  ```python
  import sys  # 再次重复导入
  ```

**9. [PL-unreachable] 第 95 行**
- **问题**: Unreachable code
- **原代码**:
  ```python
  print("程序结束")  # 无法到达的代码
  ```

**10. [PL-unused-variable] 第 45 行**
- **问题**: Unused variable 'screem'
- **原代码**:
  ```python
  screem = screen  # 拼写错误，但未使用
  ```

#### 📄 `main_menu_ui.py`

**1. [PL-unused-variable] 第 48 行**
- **问题**: Unused variable 'title_rect'
- **原代码**:
  ```python
  title_rect = title.get_rect(center=(SCREEN_WIDTH // 2, SCREEN_HEIGHT // 4))
  ```

#### 📄 `normalizer.py`

**1. [PL-broad-exception-caught] 第 31 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

#### 📄 `puzzle_editor.py`

**1. [AST002] 第 285 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  "has_image": self.image is not None,
  ```
- **修复方案**:
  ```python
  "has_image": self.image == not None,
  ```

**2. [PL-bad-indentation] 第 93 行**
- **问题**: Bad indentation. Found 21 spaces, expected 20
- **原代码**:
  ```python
  self.ui.on_image_loaded()
  ```

**3. [PL-bad-indentation] 第 153 行**
- **问题**: Bad indentation. Found 25 spaces, expected 24
- **原代码**:
  ```python
  print(f"【警告】输入值超出范围 ({min_val}-{max_val})")
  ```

**4. [PL-bad-indentation] 第 154 行**
- **问题**: Bad indentation. Found 25 spaces, expected 24
- **原代码**:
  ```python
  count_window.destroy()
  ```

**5. [PL-bad-indentation] 第 155 行**
- **问题**: Bad indentation. Found 25 spaces, expected 24
- **原代码**:
  ```python
  root.destroy()
  ```

**6. [PL-bad-indentation] 第 244 行**
- **问题**: Bad indentation. Found 13 spaces, expected 12
- **原代码**:
  ```python
  return self.image.copy() # UI 会根据 self.image.size 来调整显示
  ```

**7. [PL-unused-argument] 第 143 行**
- **问题**: Unused argument 'event'
- **原代码**:
  ```python
  def on_count_enter(event=None): # 支持回车确认
  ```

**8. [PL-unused-variable] 第 182 行**
- **问题**: Unused variable 'save_dir'
- **原代码**:
  ```python
  puzzle_id, save_dir = result
  ```

**9. [PL-broad-exception-caught] 第 229 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**10. [PL-unused-argument] 第 239 行**
- **问题**: Unused argument 'width'
- **原代码**:
  ```python
  def get_preview_image(self, width, height):
  ```

**11. [PL-unused-argument] 第 239 行**
- **问题**: Unused argument 'height'
- **原代码**:
  ```python
  def get_preview_image(self, width, height):
  ```

**12. [PL-unused-import] 第 9 行**
- **问题**: Unused ImageOps imported from PIL
- **原代码**:
  ```python
  from PIL import Image, ImageOps
  ```

#### 📄 `puzzle_editor_ui.py`

**1. [PL-broad-exception-caught] 第 350 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `puzzle_piece.py`

**1. [PL-unused-argument] 第 29 行**
- **问题**: Unused argument 'piece_area_rect'
- **原代码**:
  ```python
  def stop_drag(self, target_areas, piece_area_rect):
  ```

**2. [PL-unused-argument] 第 56 行**
- **问题**: Unused argument 'in_piece_area'
- **原代码**:
  ```python
  def draw(self, surface, in_piece_area=False):
  ```

#### 📄 `ranking_manager.py`

**1. [AST002] 第 25 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if v is None:
  ```
- **修复方案**:
  ```python
  if v == None:
  ```

**2. [AST002] 第 47 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if diff is None:
  ```
- **修复方案**:
  ```python
  if diff == None:
  ```

**3. [AST002] 第 49 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if diff is None:
  ```
- **修复方案**:
  ```python
  if diff == None:
  ```

**4. [AST002] 第 52 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  difficulty = int(diff) if diff is not None else 3
  ```
- **修复方案**:
  ```python
  difficulty = int(diff) if diff == not None else 3
  ```

**5. [AST002] 第 74 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if elapsed is None:
  ```
- **修复方案**:
  ```python
  if elapsed == None:
  ```

**6. [PL-broad-exception-caught] 第 30 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**7. [PL-broad-exception-caught] 第 53 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**8. [PL-broad-exception-caught] 第 101 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

#### 📄 `ranking_ui.py`

**1. [PL-broad-exception-caught] 第 85 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**2. [PL-broad-exception-caught] 第 183 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**3. [PL-protected-access] 第 181 行**
- **问题**: Access to a protected member _data of a client class
- **原代码**:
  ```python
  rm._data = [r for r in rm._data if r.get("image") != current_image]  # 直接操作内部列表
  ```

**4. [PL-protected-access] 第 181 行**
- **问题**: Access to a protected member _data of a client class
- **原代码**:
  ```python
  rm._data = [r for r in rm._data if r.get("image") != current_image]  # 直接操作内部列表
  ```

**5. [PL-protected-access] 第 182 行**
- **问题**: Access to a protected member _save of a client class
- **原代码**:
  ```python
  rm._save()
  ```

**6. [PL-broad-exception-caught] 第 208 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**7. [PL-broad-exception-caught] 第 249 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**8. [PL-unused-argument] 第 96 行**
- **问题**: Unused argument 'audio_manager'
- **原代码**:
  ```python
  def show_ranking(screen, audio_manager=None):
  ```

**9. [PL-unused-variable] 第 101 行**
- **问题**: Unused variable 'image_manager'
- **原代码**:
  ```python
  image_manager = ImageManager()  # 先留着，便于后续扩展
  ```

**10. [PL-unused-variable] 第 143 行**
- **问题**: Unused variable 'assets_dir'
- **原代码**:
  ```python
  assets_dir = os.path.normpath(os.path.join(cur_dir, '..', 'assets'))
  ```

**11. [PL-unused-import] 第 8 行**
- **问题**: Unused RANKING_DIR imported from config
- **原代码**:
  ```python
  from config import RANKING_DIR, SCREEN_WIDTH, SCREEN_HEIGHT, CUSTOM_IMAGE_DIR
  ```

#### 📄 `save_manager.py`

**1. [PL-broad-exception-caught] 第 13 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PL-broad-exception-caught] 第 23 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `settings_ui.py`

**1. [PL-unused-import] 第 5 行**
- **问题**: Unused SCREEN_HEIGHT imported from config
- **原代码**:
  ```python
  from config import SCREEN_HEIGHT,SCREEN_WIDTH
  ```

#### 📄 `start_screen_ui.py`

**1. [AST002] 第 110 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if self.is_hovered and self.hover_surf is not None and self.hover_surf is not self.image_surf:
  ```
- **修复方案**:
  ```python
  if self.is_hovered and self.hover_surf == not None and self.hover_surf == not self.image_surf:
  ```

**2. [AST002] 第 110 行**
- **问题**: 疑似使用 'is' 进行值比较，建议使用 '==' （is 仅用于 None/True/False）。
- **原代码**:
  ```python
  if self.is_hovered and self.hover_surf is not None and self.hover_surf is not self.image_surf:
  ```
- **修复方案**:
  ```python
  if self.is_hovered and self.hover_surf == not None and self.hover_surf == not self.image_surf:
  ```

**3. [PL-bad-indentation] 第 220 行**
- **问题**: Bad indentation. Found 13 spaces, expected 12
- **原代码**:
  ```python
  del_btn = Button(delete_button_x, y_start + i * y_spacing, delete_button_width, 50, "删除", font_small)
  ```

**4. [PL-bad-indentation] 第 221 行**
- **问题**: Bad indentation. Found 13 spaces, expected 12
- **原代码**:
  ```python
  buttons.append((del_btn, f"del_{i}")) # 使用特殊标识符
  ```

**5. [PL-bad-indentation] 第 222 行**
- **问题**: Bad indentation. Found 13 spaces, expected 12
- **原代码**:
  ```python
  delete_buttons[i] = del_btn # 也可以用字典映射
  ```

**6. [PL-broad-exception-caught] 第 97 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception as e:
  ```

**7. [PL-broad-exception-caught] 第 80 行**
- **问题**: Catching too general exception Exception
- **原代码**:
  ```python
  except Exception:
  ```

**8. [PL-bare-except] 第 154 行**
- **问题**: No exception type(s) specified
- **原代码**:
  ```python
  except:
  ```

**9. [PL-unused-argument] 第 267 行**
- **问题**: Unused argument 'audio_manager'
- **原代码**:
  ```python
  def show_start_screen(screen, audio_manager=None):
  ```

**10. [PL-unused-import] 第 6 行**
- **问题**: Unused import time
- **原代码**:
  ```python
  import time
  ```

**11. [PL-unused-import] 第 16 行**
- **问题**: Unused PIECE_AREA_HEIGHT imported from config
- **原代码**:
  ```python
  from config import (
  ```

**12. [PL-unused-import] 第 16 行**
- **问题**: Unused BACKGROUND_COLOR imported from config
- **原代码**:
  ```python
  from config import (
  ```

**13. [PL-unused-import] 第 16 行**
- **问题**: Unused GRID_COLOR imported from config
- **原代码**:
  ```python
  from config import (
  ```

**14. [PL-unused-import] 第 16 行**
- **问题**: Unused FONT_PATHS imported from config
- **原代码**:
  ```python
  from config import (
  ```

**15. [PL-unused-import] 第 16 行**
- **问题**: Unused FONT_SIZES imported from config
- **原代码**:
  ```python
  from config import (
  ```

**16. [B301] 第 146 行**
- **问题**: Pickle and modules that wrap it can be unsafe when used to deserialize untrusted data, possible security issue.
- **原代码**:
  ```python
  state = pickle.load(f)
  ```

### 🟢 LOW 级别 (44 个)

#### 📄 `audio_manager.py`

**1. [PY011] 第 19 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PY011] 第 43 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `build.py`

**1. [B404] 第 3 行**
- **问题**: Consider possible security implications associated with the subprocess module.
- **原代码**:
  ```python
  import subprocess
  ```

**2. [B605] 第 22 行**
- **问题**: Starting a process with a shell: Seems safe, but may be changed in the future, consider rewriting without shell
- **原代码**:
  ```python
  os.system("rmdir /s /q dist build *.spec >nul 2>&1")
  ```

**3. [B607] 第 22 行**
- **问题**: Starting a process with a partial executable path
- **原代码**:
  ```python
  os.system("rmdir /s /q dist build *.spec >nul 2>&1")
  ```

**4. [B603] 第 39 行**
- **问题**: subprocess call - check for execution of untrusted input.
- **原代码**:
  ```python
  subprocess.call(cmd)
  ```

#### 📄 `game_controller.py`

**1. [PY203] 第 191 行**
- **问题**: list.remove() 要求参数为列表中的元素，而非索引。
- **原代码**:
  ```python
  self.state['puzzle_pieces'].remove(piece)
  ```

#### 📄 `game_logic.py`

**1. [PY011] 第 121 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PY011] 第 135 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**3. [PY011] 第 317 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**4. [PY011] 第 352 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**5. [PY011] 第 417 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**6. [PY011] 第 462 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**7. [PY011] 第 479 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**8. [PY011] 第 665 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**9. [PY011] 第 800 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**10. [PY203] 第 144 行**
- **问题**: list.remove() 要求参数为列表中的元素，而非索引。
- **原代码**:
  ```python
  os.remove(save_path)
  ```

**11. [PY203] 第 715 行**
- **问题**: list.remove() 要求参数为列表中的元素，而非索引。
- **原代码**:
  ```python
  puzzle_pieces.remove(piece)
  ```

**12. [B403] 第 8 行**
- **问题**: Consider possible security implications associated with pickle module.
- **原代码**:
  ```python
  import pickle
  ```

#### 📄 `game_ui.py`

**1. [PY011] 第 110 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `generate_jigsaw_mask.py`

**1. [PY011] 第 175 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PY011] 第 218 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**3. [PY011] 第 239 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**4. [PY011] 第 247 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**5. [PY011] 第 269 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `image_editor.py`

**1. [PY011] 第 62 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `normalizer.py`

**1. [PY011] 第 31 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

#### 📄 `puzzle_editor.py`

**1. [PY011] 第 229 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `puzzle_editor_ui.py`

**1. [PY011] 第 350 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `ranking_manager.py`

**1. [PY011] 第 30 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

**2. [PY011] 第 53 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

**3. [PY011] 第 101 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

#### 📄 `ranking_ui.py`

**1. [PY011] 第 85 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

**2. [PY011] 第 183 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**3. [PY011] 第 208 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

**4. [PY011] 第 249 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

#### 📄 `save_manager.py`

**1. [PY011] 第 13 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**2. [PY011] 第 23 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

#### 📄 `start_screen_ui.py`

**1. [PY011] 第 80 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception:
  ```

**2. [PY011] 第 97 行**
- **问题**: 过于宽泛的异常捕获：Exception。
- **原代码**:
  ```python
  except Exception as e:
  ```

**3. [PY010] 第 154 行**
- **问题**: 使用裸 except，建议捕获具体异常类型。
- **原代码**:
  ```python
  except:
  ```

**4. [PY203] 第 162 行**
- **问题**: list.remove() 要求参数为列表中的元素，而非索引。
- **原代码**:
  ```python
  os.remove(save_path)
  ```

**5. [B403] 第 7 行**
- **问题**: Consider possible security implications associated with pickle module.
- **原代码**:
  ```python
  import pickle
  ```

**6. [B110] 第 80 行**
- **问题**: Try, Except, Pass detected.
- **原代码**:
  ```python
  except Exception:
  ```
